<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Aravind shrenivas Murali">

<title>Transforming like a Data Transformer</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="hw-02-01_files/libs/clipboard/clipboard.min.js"></script>
<script src="hw-02-01_files/libs/quarto-html/quarto.js"></script>
<script src="hw-02-01_files/libs/quarto-html/popper.min.js"></script>
<script src="hw-02-01_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="hw-02-01_files/libs/quarto-html/anchor.min.js"></script>
<link href="hw-02-01_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="hw-02-01_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="hw-02-01_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="hw-02-01_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="hw-02-01_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#loading-necessary-packages" id="toc-loading-necessary-packages" class="nav-link active" data-scroll-target="#loading-necessary-packages">Loading necessary packages</a></li>
  <li><a href="#load-and-examine-a-dataset" id="toc-load-and-examine-a-dataset" class="nav-link" data-scroll-target="#load-and-examine-a-dataset">Load and examine a dataset</a></li>
  <li><a href="#describing-properties-of-the-data" id="toc-describing-properties-of-the-data" class="nav-link" data-scroll-target="#describing-properties-of-the-data">Describing properties of the data</a></li>
  <li><a href="#testing-normality" id="toc-testing-normality" class="nav-link" data-scroll-target="#testing-normality">Testing normality</a></li>
  <li><a href="#normality-within-groups" id="toc-normality-within-groups" class="nav-link" data-scroll-target="#normality-within-groups">Normality within groups</a></li>
  <li><a href="#transforming-data" id="toc-transforming-data" class="nav-link" data-scroll-target="#transforming-data">Transforming data</a>
  <ul class="collapse">
  <li><a href="#box-cox-transformation" id="toc-box-cox-transformation" class="nav-link" data-scroll-target="#box-cox-transformation"><strong>Box-cox Transformation</strong></a></li>
  </ul></li>
  <li><a href="#produce-an-html-transformation-summary" id="toc-produce-an-html-transformation-summary" class="nav-link" data-scroll-target="#produce-an-html-transformation-summary"><strong>Produce an HTML Transformation Summary</strong></a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Transforming like a Data Transformer</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Aravind shrenivas Murali </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="loading-necessary-packages" class="level2">
<h2 class="anchored" data-anchor-id="loading-necessary-packages">Loading necessary packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sets the number of significant figures to two - e.g., 0.01</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Required package for quick package downloading and loading </span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(pacman))  </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: pacman</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Downloads and load required packages</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dlookr, <span class="co"># Exploratory data analysis</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>               dplyr,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>               forecast, <span class="co"># Needed for Box-Cox transformations</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>               formattable, <span class="co"># HTML tables from R outputs</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>               DMwR2,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>               here, <span class="co"># Standardizes paths to data</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>               kableExtra, <span class="co"># Alternative to formattable</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>               knitr, <span class="co"># Needed to write HTML reports</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>               missRanger, <span class="co"># To generate NAs</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>               tidyverse) <span class="co"># Powerful data wrangling package suite</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-and-examine-a-dataset" class="level2">
<h2 class="anchored" data-anchor-id="load-and-examine-a-dataset">Load and examine a dataset</h2>
<p>I have chosen the hollywood age gap dataset for the assignment. This dataset basically shows the age of the couple and the age difference between them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dataset  <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-02-14/age_gaps.csv'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">actor_age =</span> <span class="fu">ifelse</span>(actor_2_age <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> actor_2_age <span class="sc">&lt;=</span> <span class="dv">30</span>, <span class="st">"Young"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">ifelse</span>(actor_2_age <span class="sc">&gt;</span> <span class="dv">30</span> <span class="sc">&amp;</span> actor_2_age <span class="sc">&lt;=</span> <span class="dv">50</span>, <span class="st">"Old"</span>, <span class="st">"Very old"</span>)),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">actor_age =</span> <span class="fu">fct_rev</span>(actor_age))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 1155 Columns: 13
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (6): movie_name, director, actor_1_name, actor_2_name, character_1_gend...
dbl  (5): release_year, age_difference, couple_number, actor_1_age, actor_2_age
date (2): actor_1_birthdate, actor_2_birthdate

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>I have loaded the dataset using the URL provided in the git repository. I am using the age of the young actor in every couple which is mentioned as actor_2_age in the dataset and performing the operations in it. I am chosing the younger actors because their age seems a bit diverse compared to the older actors where most of them fall under very old category. Further, I am creating another categorical variable called actor_age where it says if the actor is young, old or very old.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formattable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-condensed">
<thead>
<tr>
<th style="text-align:right;">
movie_name
</th>
<th style="text-align:right;">
release_year
</th>
<th style="text-align:right;">
director
</th>
<th style="text-align:right;">
age_difference
</th>
<th style="text-align:right;">
couple_number
</th>
<th style="text-align:right;">
actor_1_name
</th>
<th style="text-align:right;">
actor_2_name
</th>
<th style="text-align:right;">
character_1_gender
</th>
<th style="text-align:right;">
character_2_gender
</th>
<th style="text-align:right;">
actor_1_birthdate
</th>
<th style="text-align:right;">
actor_2_birthdate
</th>
<th style="text-align:right;">
actor_1_age
</th>
<th style="text-align:right;">
actor_2_age
</th>
<th style="text-align:right;">
actor_age
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
Harold and Maude
</td>
<td style="text-align:right;">
1971
</td>
<td style="text-align:right;">
Hal Ashby
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
Ruth Gordon
</td>
<td style="text-align:right;">
Bud Cort
</td>
<td style="text-align:right;">
woman
</td>
<td style="text-align:right;">
man
</td>
<td style="text-align:right;">
1896-10-30
</td>
<td style="text-align:right;">
1948-03-29
</td>
<td style="text-align:right;">
75
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
Young
</td>
</tr>
<tr>
<td style="text-align:right;">
Venus
</td>
<td style="text-align:right;">
2006
</td>
<td style="text-align:right;">
Roger Michell
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
Peter O’Toole
</td>
<td style="text-align:right;">
Jodie Whittaker
</td>
<td style="text-align:right;">
man
</td>
<td style="text-align:right;">
woman
</td>
<td style="text-align:right;">
1932-08-02
</td>
<td style="text-align:right;">
1982-06-03
</td>
<td style="text-align:right;">
74
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
Young
</td>
</tr>
<tr>
<td style="text-align:right;">
The Quiet American
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:right;">
Phillip Noyce
</td>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
Michael Caine
</td>
<td style="text-align:right;">
Do Thi Hai Yen
</td>
<td style="text-align:right;">
man
</td>
<td style="text-align:right;">
woman
</td>
<td style="text-align:right;">
1933-03-14
</td>
<td style="text-align:right;">
1982-10-01
</td>
<td style="text-align:right;">
69
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
Young
</td>
</tr>
<tr>
<td style="text-align:right;">
The Big Lebowski
</td>
<td style="text-align:right;">
1998
</td>
<td style="text-align:right;">
Joel Coen
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
David Huddleston
</td>
<td style="text-align:right;">
Tara Reid
</td>
<td style="text-align:right;">
man
</td>
<td style="text-align:right;">
woman
</td>
<td style="text-align:right;">
1930-09-17
</td>
<td style="text-align:right;">
1975-11-08
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
Young
</td>
</tr>
<tr>
<td style="text-align:right;">
Beginners
</td>
<td style="text-align:right;">
2010
</td>
<td style="text-align:right;">
Mike Mills
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
Christopher Plummer
</td>
<td style="text-align:right;">
Goran Visnjic
</td>
<td style="text-align:right;">
man
</td>
<td style="text-align:right;">
man
</td>
<td style="text-align:right;">
1929-12-13
</td>
<td style="text-align:right;">
1972-09-09
</td>
<td style="text-align:right;">
81
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
Old
</td>
</tr>
<tr>
<td style="text-align:right;">
Poison Ivy
</td>
<td style="text-align:right;">
1992
</td>
<td style="text-align:right;">
Katt Shea
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
Tom Skerritt
</td>
<td style="text-align:right;">
Drew Barrymore
</td>
<td style="text-align:right;">
man
</td>
<td style="text-align:right;">
woman
</td>
<td style="text-align:right;">
1933-08-25
</td>
<td style="text-align:right;">
1975-02-22
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
Young
</td>
</tr>
</tbody>

</table>
</div>
</div>
<p>From the above code we can see the new categorical variable added which classifies if the actor_2 is young, old or very old.</p>
</section>
<section id="describing-properties-of-the-data" class="level2">
<h2 class="anchored" data-anchor-id="describing-properties-of-the-data">Describing properties of the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age_difference, actor_1_age, actor_2_age) <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  dlookr<span class="sc">::</span><span class="fu">describe</span>() <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(described_variables, skewness) <span class="sc">|&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formattable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-condensed">
<thead>
<tr>
<th style="text-align:right;">
described_variables
</th>
<th style="text-align:right;">
skewness
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
age_difference
</td>
<td style="text-align:right;">
1.20
</td>
</tr>
<tr>
<td style="text-align:right;">
actor_1_age
</td>
<td style="text-align:right;">
0.59
</td>
</tr>
<tr>
<td style="text-align:right;">
actor_2_age
</td>
<td style="text-align:right;">
0.98
</td>
</tr>
</tbody>

</table>
</div>
</div>
<p>From the above, we can see that age_difference is moderately positive skewed and the other categorical variables are mildly positive skewed. So, the distribution is skewed to the right.</p>
</section>
<section id="testing-normality" class="level2">
<h2 class="anchored" data-anchor-id="testing-normality">Testing normality</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_normality</span>(age_difference, actor_1_age, actor_2_age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-5-3.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I can observe that the graphs origin, log transformation and sqrt transformation all represents a normal bell curve and they are moderately positively skewed. We can see that the qq plots are in a 45 degree angle which means that the observed data closely matches the expected distribution.\</p>
</section>
<section id="normality-within-groups" class="level2">
<h2 class="anchored" data-anchor-id="normality-within-groups">Normality within groups</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(actor_age) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(actor_1_age, actor_2_age) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_normality</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Adding missing grouping variables: `actor_age`</code></pre>
</div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-6-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-6-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-6-5.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-6-6.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The plots of actor 1 age and actor 2 age closely represents a normal bell curve and the qq plot is also in a 45 degree angle. This means that the distribution is as expected.</p>
</section>
<section id="transforming-data" class="level2">
<h2 class="anchored" data-anchor-id="transforming-data">Transforming data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>InsMod <span class="ot">&lt;-</span> dataset <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(actor_1_age <span class="sc">&gt;</span> <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I am filtering the dataset and creating a new dataset called <code>InsMod</code> where it contains values of actor 1 age which is greater than 25.</p>
<section id="square-root-transformation" class="level4">
<h4 class="anchored" data-anchor-id="square-root-transformation">Square-root Transformation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>sqrtIns <span class="ot">&lt;-</span> <span class="fu">transform</span>(InsMod<span class="sc">$</span>actor_1_age, <span class="at">method =</span> <span class="st">"sqrt"</span>) </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(sqrtIns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>* Resolving Skewness with sqrt

* Information of Transformation (before vs after)
         Original Transformation
n         1101.00       1101.000
na           0.00          0.000
mean        41.51          6.400
sd           9.86          0.747
se_mean      0.30          0.023
IQR         13.00          1.025
skewness     0.77          0.492
kurtosis     0.39         -0.159
p00         26.00          5.099
p01         26.00          5.099
p05         28.00          5.292
p10         30.00          5.477
p20         33.00          5.745
p25         34.00          5.831
p30         36.00          6.000
p40         37.00          6.083
p50         40.00          6.325
p60         42.00          6.481
p70         46.00          6.782
p75         47.00          6.856
p80         49.00          7.000
p90         56.00          7.483
p95         60.00          7.746
p99         69.00          8.307
p100        81.00          9.000</code></pre>
</div>
</div>
<p>The above code transforms the ‘actor_1_age’ variable in the ‘InsMod’ data frame using the square root method and then compare the metrics.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>sqrtIns <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>These are the plots of original data and transformation with sqrt. We can see that the graph is not that much differing from the original data except the values because we have transformed it using square root method. This confirms that the skewness is the same after transformation preserving the general shape of data.</p>
</section>
<section id="logarithmic-1-transformation" class="level4">
<h4 class="anchored" data-anchor-id="logarithmic-1-transformation">Logarithmic (+1) Transformation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>Log1Ins <span class="ot">&lt;-</span> <span class="fu">transform</span>(InsMod<span class="sc">$</span>actor_1_age, <span class="at">method =</span> <span class="st">"log+1"</span>) </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Log1Ins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>* Resolving Skewness with log+1

* Information of Transformation (before vs after)
         Original Transformation
n         1101.00        1.1e+03
na           0.00        0.0e+00
mean        41.51        3.7e+00
sd           9.86        2.2e-01
se_mean      0.30        6.8e-03
IQR         13.00        3.2e-01
skewness     0.77        2.4e-01
kurtosis     0.39       -4.6e-01
p00         26.00        3.3e+00
p01         26.00        3.3e+00
p05         28.00        3.4e+00
p10         30.00        3.4e+00
p20         33.00        3.5e+00
p25         34.00        3.6e+00
p30         36.00        3.6e+00
p40         37.00        3.6e+00
p50         40.00        3.7e+00
p60         42.00        3.8e+00
p70         46.00        3.9e+00
p75         47.00        3.9e+00
p80         49.00        3.9e+00
p90         56.00        4.0e+00
p95         60.00        4.1e+00
p99         69.00        4.2e+00
p100        81.00        4.4e+00</code></pre>
</div>
</div>
<p>Transforming the original data with logrithmic(+1) transformation and comparing the values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>Log1Ins <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The above graphs denotes the original data and transformed data using logrithmic(+1) transformation. We can see that the graphs have shifted slightly to the left than the original data. So the positive skewness has been reduced and we can see that the transformed plot resembles normal bell curve more.</p>
</section>
<section id="inverse-transformation" class="level4">
<h4 class="anchored" data-anchor-id="inverse-transformation">Inverse Transformation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>InvIns <span class="ot">&lt;-</span> <span class="fu">transform</span>(InsMod<span class="sc">$</span>actor_1_age, <span class="at">method =</span> <span class="st">"1/x"</span>) </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(InvIns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>* Resolving Skewness with 1/x

* Information of Transformation (before vs after)
         Original Transformation
n         1101.00        1.1e+03
na           0.00        0.0e+00
mean        41.51        2.5e-02
sd           9.86        5.7e-03
se_mean      0.30        1.7e-04
IQR         13.00        8.1e-03
skewness     0.77        2.6e-01
kurtosis     0.39       -5.3e-01
p00         26.00        1.2e-02
p01         26.00        1.4e-02
p05         28.00        1.7e-02
p10         30.00        1.8e-02
p20         33.00        2.0e-02
p25         34.00        2.1e-02
p30         36.00        2.2e-02
p40         37.00        2.4e-02
p50         40.00        2.5e-02
p60         42.00        2.7e-02
p70         46.00        2.8e-02
p75         47.00        2.9e-02
p80         49.00        3.0e-02
p90         56.00        3.3e-02
p95         60.00        3.6e-02
p99         69.00        3.8e-02
p100        81.00        3.8e-02</code></pre>
</div>
</div>
<p>Transforming the original data with inverse transformation and comparing the values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>InvIns <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This transformation plot is similar to the last one. the idea is that we are transforming the data to make the data more normalised. Inverse transformation has reduced the skewness.</p>
</section>
<section id="squared-transformation" class="level4">
<h4 class="anchored" data-anchor-id="squared-transformation">Squared Transformation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>SqrdIns <span class="ot">&lt;-</span> <span class="fu">transform</span>(InsMod<span class="sc">$</span>actor_1_age, <span class="at">method =</span> <span class="st">"x^2"</span>) </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(SqrdIns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>* Resolving Skewness with x^2

* Information of Transformation (before vs after)
         Original Transformation
n         1101.00         1101.0
na           0.00            0.0
mean        41.51         1820.7
sd           9.86          903.0
se_mean      0.30           27.2
IQR         13.00         1053.0
skewness     0.77            1.4
kurtosis     0.39            2.5
p00         26.00          676.0
p01         26.00          676.0
p05         28.00          784.0
p10         30.00          900.0
p20         33.00         1089.0
p25         34.00         1156.0
p30         36.00         1296.0
p40         37.00         1369.0
p50         40.00         1600.0
p60         42.00         1764.0
p70         46.00         2116.0
p75         47.00         2209.0
p80         49.00         2401.0
p90         56.00         3136.0
p95         60.00         3600.0
p99         69.00         4761.0
p100        81.00         6561.0</code></pre>
</div>
</div>
<p>Transforming the original data with squared transformation and comparing the values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>SqrdIns <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>So the squared transformation has skewed the data more to the negative side and made it a negative skew plot.</p>
</section>
<section id="cubed-transformation" class="level4">
<h4 class="anchored" data-anchor-id="cubed-transformation">Cubed Transformation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>CubeIns <span class="ot">&lt;-</span> <span class="fu">transform</span>(InsMod<span class="sc">$</span>actor_1_age, <span class="at">method =</span> <span class="st">"x^3"</span>) </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(CubeIns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>* Resolving Skewness with x^3

* Information of Transformation (before vs after)
         Original Transformation
n         1101.00        1.1e+03
na           0.00        0.0e+00
mean        41.51        8.4e+04
sd           9.86        6.6e+04
se_mean      0.30        2.0e+03
IQR         13.00        6.5e+04
skewness     0.77        2.2e+00
kurtosis     0.39        6.7e+00
p00         26.00        1.8e+04
p01         26.00        1.8e+04
p05         28.00        2.2e+04
p10         30.00        2.7e+04
p20         33.00        3.6e+04
p25         34.00        3.9e+04
p30         36.00        4.7e+04
p40         37.00        5.1e+04
p50         40.00        6.4e+04
p60         42.00        7.4e+04
p70         46.00        9.7e+04
p75         47.00        1.0e+05
p80         49.00        1.2e+05
p90         56.00        1.8e+05
p95         60.00        2.2e+05
p99         69.00        3.3e+05
p100        81.00        5.3e+05</code></pre>
</div>
</div>
<p>Transforming the original data with cubed transformation and comparing the values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>CubeIns <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The cubed transformation is more like the squared transformation, so the original data is positive skewed and it is reversed, thus making it negative skew.</p>
</section>
<section id="box-cox-transformation" class="level3">
<h3 class="anchored" data-anchor-id="box-cox-transformation"><strong>Box-cox Transformation</strong></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>BoxCoxIns <span class="ot">&lt;-</span> <span class="fu">transform</span>(InsMod<span class="sc">$</span>actor_1_age, <span class="at">method =</span> <span class="st">"Box-Cox"</span>) </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(BoxCoxIns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>* Resolving Skewness with Box-Cox

* Information of Transformation (before vs after)
         Original Transformation
n         1101.00        1.1e+03
na           0.00        0.0e+00
mean        41.51        1.6e+00
sd           9.86        3.0e-02
se_mean      0.30        9.2e-04
IQR         13.00        4.3e-02
skewness     0.77       -4.1e-02
kurtosis     0.39       -5.8e-01
p00         26.00        1.5e+00
p01         26.00        1.5e+00
p05         28.00        1.5e+00
p10         30.00        1.5e+00
p20         33.00        1.6e+00
p25         34.00        1.6e+00
p30         36.00        1.6e+00
p40         37.00        1.6e+00
p50         40.00        1.6e+00
p60         42.00        1.6e+00
p70         46.00        1.6e+00
p75         47.00        1.6e+00
p80         49.00        1.6e+00
p90         56.00        1.6e+00
p95         60.00        1.6e+00
p99         69.00        1.7e+00
p100        81.00        1.7e+00</code></pre>
</div>
</div>
<p>Transforming the original data with Box-cox transformation and comparing the values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>BoxCoxIns <span class="sc">|&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="hw-02-01_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Box-Cox transformation searches for the the best lambda value that maximizes the log-likelihood. So we can see that we have normally distributed data after transformation.</p>
</section>
</section>
<section id="produce-an-html-transformation-summary" class="level2">
<h2 class="anchored" data-anchor-id="produce-an-html-transformation-summary"><strong>Produce an HTML Transformation Summary</strong></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transformation_web_report</span>(dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>

processing file: transformation_temp.Rmd</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                         
  |                                                   |   0%
  |                                                         
  |.                                                  |   3%                   
  |                                                         
  |...                                                |   5% [setup]           
  |                                                         
  |....                                               |   8%                   
  |                                                         
  |.....                                              |  10% [load_packages]   
  |                                                         
  |.......                                            |  13%                   
  |                                                         
  |........                                           |  15% [unnamed-chunk-21]
  |                                                         
  |.........                                          |  18%                   
  |                                                         
  |..........                                         |  21% [udf]             
  |                                                         
  |............                                       |  23%                   
  |                                                         
  |.............                                      |  26% [create-overview] 
  |                                                         
  |..............                                     |  28%                   
  |                                                         
  |................                                   |  31% [overview]        
  |                                                         
  |.................                                  |  33%                   
  |                                                         
  |..................                                 |  36% [overview-pre]    
  |                                                         
  |....................                               |  38%                   
  |                                                         
  |.....................                              |  41% [unnamed-chunk-22]
  |                                                         
  |......................                             |  44%                   
  |                                                         
  |........................                           |  46% [unnamed-chunk-23]
  |                                                         
  |.........................                          |  49%                   
  |                                                         
  |..........................                         |  51% [unnamed-chunk-24]
  |                                                         
  |...........................                        |  54%                   
  |                                                         
  |.............................                      |  56% [nalist]          
  |                                                         
  |..............................                     |  59%                   
  |                                                         
  |...............................                    |  62% [unnamed-chunk-25]
  |                                                         
  |.................................                  |  64%                   
  |                                                         
  |..................................                 |  67% [outlist]         
  |                                                         
  |...................................                |  69%                   
  |                                                         
  |.....................................              |  72% [unnamed-chunk-26]
  |                                                         
  |......................................             |  74%                   
  |                                                         
  |.......................................            |  77% [skweness]        
  |                                                         
  |.........................................          |  79%                   
  |                                                         
  |..........................................         |  82% [unnamed-chunk-27]
  |                                                         
  |...........................................        |  85%                   
  |                                                         
  |............................................       |  87% [binning]         
  |                                                         
  |..............................................     |  90%                   
  |                                                         
  |...............................................    |  92% [unnamed-chunk-28]
  |                                                         
  |................................................   |  95%                   
  |                                                         
  |.................................................. |  97% [optimal-binning] 
  |                                                         
  |...................................................| 100%                   
                                                                                                             </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>output file: transformation_temp.knit.md</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>/Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/pandoc +RTS -K512m -RTS transformation_temp.knit.md --to html4 --from markdown+autolink_bare_uris+tex_math_single_backslash --output /var/folders/cs/bb191dhn1hv_sg6c99x_hw7w0000gn/T//Rtmp2zj9Dd/Transformation_Report.html --lua-filter /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/library/rmarkdown/rmarkdown/lua/pagebreak.lua --lua-filter /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/library/rmarkdown/rmarkdown/lua/latex-div.lua --embed-resources --standalone --variable bs3=TRUE --section-divs --template /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/library/rmarkdown/rmd/h/default.html --no-highlight --variable highlightjs=1 --variable theme=bootstrap --css /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/library/dlookr/resources/dlookr-bootstrap.css --mathjax --variable 'mathjax-url=https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' --include-in-header /var/folders/cs/bb191dhn1hv_sg6c99x_hw7w0000gn/T//Rtmp2zj9Dd/rmarkdown-str53d1205de5.html --variable code_folding=show --variable code_menu=1 --include-in-header header_temp.html --include-after-body /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/library/dlookr/resources/footer.html </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Output created: /var/folders/cs/bb191dhn1hv_sg6c99x_hw7w0000gn/T//Rtmp2zj9Dd/Transformation_Report.html</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>